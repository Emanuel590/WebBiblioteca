@page
@model WebBiblioteca.Pages.PerfilUsuarioModel
@{
    ViewData["Title"] = "Perfil de Usuario";
}
@using Microsoft.AspNetCore.Http

<script>
    var authToken = '@HttpContext.Session.GetString("AuthToken")';
</script>

<style>
    .action-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        gap: 0.5rem;
    }

        .action-list li {
            margin: 0;
            padding: 0;
        }

    .btn-outline-purple {
        background-color: white;
        color: #795D8C;
        border: 2px solid #795D8C;
        transition: background-color 0.5s ease, transform 0.5s ease;
        font-weight: 500;
    }

        .btn-outline-purple:hover {
            background-color: #795D8C;
            color: white;
        }
    /* Tarjeta card styles */
    .tarjeta-card {
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        transition: transform 0.2s ease;
    }

        .tarjeta-card:hover {
            transform: translateY(-3px);
        }

    .tarjeta-number {
        font-size: 1.25rem;
        letter-spacing: 2px;
        margin-bottom: 0.5rem;
    }

    .tarjeta-bank {
        font-size: 0.9rem;
        color: #555;
    }
</style>

<div id="perfilUsuario" class="text-center">
    <p class="text-muted">Cargando Perfil...</p>
</div>

<!-- Modales para edición y eliminación de usuario -->
<div class="modal fade" id="editarUsuarioModal" tabindex="-1" aria-labelledby="editarUsuarioModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editarUsuarioModalLabel">Editar Usuario</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editarUsuarioForm">
                    <input type="hidden" id="idUsuario" />
                    <input type="hidden" id="contra" />
                    <input type="hidden" id="id_role" />
                    <input type="hidden" id="id_estado" />

                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="nombre" name="nombre" required />
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" name="email" required />
                    </div>
                    <div class="mb-3">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="text" class="form-control" id="telefono" name="telefono" required />
                    </div>
                    <div class="mb-3">
                        <label for="cedula" class="form-label">Cédula</label>
                        <input type="text" class="form-control" id="cedula" name="cedula" required />
                    </div>
                    <div class="mb-3">
                        <label for="codigoPostal" class="form-label">Código Postal</label>
                        <input type="text" class="form-control" id="codigoPostal" name="codigoPostal" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" onclick="guardarEdicionUsuario()">Guardar Cambios</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="eliminarUsuarioModal" tabindex="-1" aria-labelledby="eliminarUsuarioModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="eliminarUsuarioModalLabel">Confirmar Eliminación</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>¿Estás seguro de que deseas eliminar este usuario?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" onclick="eliminarUsuario()">Eliminar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para crear/editar tarjeta -->
<div class="modal fade" id="tarjetaModal" tabindex="-1" aria-labelledby="tarjetaModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tarjetaModalTitle"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="tarjetaForm">
                    <input type="hidden" id="id_metodo" />

                    <div class="mb-3">
                        <label for="metodoPago" class="form-label">Método de Pago</label>
                        <select class="form-select" id="metodoPago" required>
                            <option value="" disabled selected>Seleccione un método</option>
                            <option value="Tarjeta de crédito">Tarjeta de crédito</option>
                            <option value="Tarjeta de débito">Tarjeta de débito</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="entidadBancaria" class="form-label">Entidad Bancaria</label>
                        <select class="form-select" id="entidadBancaria" required>
                            <option value="" disabled selected>Seleccione una entidad Bancaria</option>
                            <option value="Banco Popular">Banco Popular</option>
                            <option value="Banco Nacional">Banco Nacional</option>
                            <option value="Bac Credomatic">Bac Credomatic</option>
                            <option value="Banco de Costa Rica">Banco de Costa Rica</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="nTarjeta" class="form-label">Número de Tarjeta</label>
                        <input type="text" class="form-control" id="nTarjeta" required maxlength="16" placeholder="Sólo números" />
                    </div>
                    <div class="mb-3">
                        <label for="idEstado" class="form-label">Estado</label>
                        <select class="form-select" id="idEstado">
                            <option value="1">Activo</option>
                            <option value="2">Inactivo</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="guardarTarjeta()">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/perfilUsuario.js"></script>